{
  "name": "plivo",
  "version": "0.1.0",
  "description": "Plivo NodeJS helper library.",
  "main": "lib/plivo.js",
  "repository": {
    "type": "git",
    "url": "git://github.com/plivo/plivo-node.git"
  },
  "keywords": [
    "plivo",
    "rest",
    "api",
    "telephony"
  ],
  "author": {
    "name": "Plivo Team"
  },
  "license": "MIT",
  "readmeFilename": "README.md",
  "dependencies": {
    "xmlbuilder": "~0.4.2",
    "request": "~2.12.0"
  },
  "directories": {
    "test": "test"
  },
  "devDependencies": {
    "nock": "~0.14.2",
    "mocha": "~1.7.4"
  },
  "scripts": {
    "test": "mocha --reporter spec"
  },
  "readme": "# plivo-node [![Build Status](https://secure.travis-ci.org/plivo/plivo-node.png?branch=master)](http://travis-ci.org/plivo/plivo-node)\n\n\n\nNode.js helper library for the Plivo API. This helper implements the following features:\n* Wrappers for Plivo REST API\n* XML generation for synchronously controlling incoming calls and messages.\n\nWe have developed some examples to show you how to use our node.js helper and to help you get started quickly. These examples are available at http://github.com/plivo/plivo-examples-node.\n\nFurther information on the Plivo Developer API and related concpets is available at https://www.plivo.com/docs/. Helper libraries for other languages are available at https://www.plivo.com/docs/helpers/.\n\n## Installation\nInstalling using npm (node package manager):\n\n`npm install git://github.com/plivo/plivo-node.git`\n\nIf you don't have npm installed or don't want to use it:\n\n```\ncd ~/.node_libraries # or the directory where node modules are stored in your OS.\ngit clone git://github.com/plivo/plivo-node.git plivo\n```\n\n**NOTE:** If you are not using `npm` for installation, then make sure that the dependencies used are installed as well.\n\n## Dependencies\n\nRequired Dependencies:\n\n* [xmlbuilder](https://github.com/oozcitak/xmlbuilder-js)\n* [request](https://github.com/mikeal/request)\n\nDev Dependencies (for running tests):\n\n* [nock](https://github.com/flatiron/nock)\n* [mocha](http://visionmedia.github.com/mocha/)\n\n## Usage\n\n`plivo` node.js helper can be used to make REST API calls and can also be used to control incoming calls and messages.\n\n### REST API\n\n`RestAPI` takes one argument i.e. an object that contains two keys - `authId` and `authToken`, like so:\n\n\n```\nvar plivo = require('plivo');\n\nvar api = plivo.RestAPI({\n  authId: '<your AUTH ID>',\n  authToken: '<your AUTH TOKEN>',\n});\n```\n\nThe `RestAPI` object exposes all the Plivo APIs and associated methods. Every method exposed by `RestAPI` object accepts two parameters:\n* `params`: an object containing a map of API params and their values.\n* `callback`: a callback that gets called after receiving response. Callbacks get two parameters:\n  * `status`: HTTP Response Status Code. Example: `200`, `201`\n  * `response`: a Javascript object because all our APIs send responses in JSON.\n\nSo for example, to make a call, you may do something like this:\n\n```\n/**\n * api.make_call accepts params and callback\n */\n \n// Keys and values to be used for params are the same as documented for our REST API.\n// So for using RestAPI.make_call, valid params can be checked\n// at https://www.plivo.com/docs/api/call/#outbound.\nvar params = {\n  from: '<your number>',\n  to: '<recipient's number>',\n  answer_url: 'http://your-server.com/answer_url',\n};\n\napi.make_call(params, function(status, response) {\n  if (status >= 200 && status < 300) {\n    console.log('Successfully made call request.');\n    console.log('Response:', response);\n  } else {\n    console.log('Oops! Something went wrong.');\n    console.log('Status:', status);\n    console.log('Response:', response);\n  }\n});\n```\n\nSome `RestAPI` methods that implement Plivo REST API that do not have required parameters may ommit the use of `params` if not required. For example, to get [Call Detail Records](https://www.plivo.com/docs/api/call/#detail) using our [Call API](https://www.plivo.com/docs/api/call/), you may do something like this:\n```\n// when you want to get all the CDRs without using any params\napi.get_cdrs(function(status, response) {\n  ...\n});\n\n// when you do want to use params like \"limit\"\napi.get_cdrs({ limit: 10 }, function(status, response) {\n  ...\n});\n```\n\n\n### XML Generation\nXML Generation can be used to generate XML that Plivo understands to synchronously control calls and messages. You may want to use it in with a web framework like [Express](http://expressjs.com/), [Geddy](http://geddyjs.org/) or whichever you prefer.\n\nTo use this feature, use the object returned by the `plivo.Response` function. Use it like so:\n\n```\nvar plivo = require('plivo');\nvar response = plivo.Response();\n\n// generates XML string.\nconsole.log(response.toXML());\n\n/*\nOUTPUTS to screen:\n\n<Response></Response>\n*/\n```\n\n`Response` exposes the following methods:\n* `toXML`: generates the XML string response. This method does not require any parameter.\n* `add<XML Element>`: there are many methods that follow this kind of naming pattern. Replace `<XML Element>` with any valid XML element listed on https://www.plivo.com/docs/xml/. Some of these methods accept `body` param (a string) as an argument, some accept `attributes` (an object that is a map of valid attributes of the `<XML Element>`) as an argument and some accept both. Which method accepts which paramter depends upon the element.\n  * `addConference`: accepts `body` and `attributes` as arguments\n  * `addNumber`: accepts `body` and `attributes` as arguments\n  * `addUser`: accepts `body` as argument\n  * `addDial`: accepts `attributes` as argument\n  * `addGetDigits`: accepts `attributes` as argument\n  * `addHangup`: accepts `attributes` as argument\n  * `addMessage`: accepts `body` and `attributes` as arguments\n  * `addPlay`: accepts `body` and `attributes` as arguments\n  * `addPreAnswer`: accepts **no argument**.\n  * `addRecord`: accepts `body` and `attributes` as arguments\n  * `addRedirect`: accepts `body` and `attributes` as arguments\n  * `addSpeak`: accepts `body` and `attributes` as arguments\n  * `addWait`: accepts `attributes` as argument\n  * `addDTMF`: accepts `body` as argument\n\nSo, you may use the above functions like so:\n\n```\n/**\n * Add a Speak Element.\n */\n\n// add the Speak element\n// Speak accepts both \"body\" and \"attributes\" as params.\n// note that \"loop\" is a valid attribute for Speak element - https://www.plivo.com/docs/xml/speak/\nresponse.addSpeak('Hello world!', { loop: 2 });\n\n// add the Wait element\n// Wait accepts only \"attributes\" as a param - https://www.plivo.com/docs/xml/wait/\nresponse.addWait({ length: 3 });\n\n// add the DTMF element\n// DTMF accepts only \"body\" as a param - https://www.plivo.com/docs/xml/dtmf/\nresponse.addDTMF('12345');\n\n// generate the response\nconsole.log(response.toXML());\n\n/*\nOUTPUTS to screen:\n\n<Response><Speak loop=\"2\">Welcome</Speak><Wait length=\"3\"/><DTMF>12345</DTMF></Response>\n*/\n\n```\n\n#### Nesting of Elements\nEvery element has a defined set of elements that can be nested in it. For example `Speak`, `Play`, `Wait` and a few others can be nested under `PreAnswer`, and `User`, `Number` cannot be nested under `Response`.\n\nTo allow nesting, all the `add<XML Element>` methods return the `<XML Element>` object to allow calling `add<XML Element>` methods on them for nesting. For example:\n\n```\n// Add Dial element.\nvar dial_element = response.addDial();\n\n// Add User element and Number element to Dial element.\ndial_element.addUser('sip:user1234@phone.plivo.com');\ndial_element.addNumber('107456967856');\n\n// Generate the XML string representation for the Dial element.\nconsole.log(dial_element.toXML());\n\n/*\nOUTPUTS to screen:\n\n<Dial><User>sip:user1234@phone.plivo.com</User><Number>107456967856</Number></Dial>\n*/\n\n// Generate the complete XML response string\nconsole.log(response.toXML());\n\n/*\nOUTPUTS to screen:\n\n<Response><Dial><User>sip:user1234@phone.plivo.com</User><Number>107456967856</Number></Dial></Response>\n*/\n```\n\n## Tests\n\nTo run tests:\n\n`npm test`\n\nor\n\n`mocha --reporter spec`\n\n## License\n*plivo-node* is licensed under the MIT License.\n\n## References\n* [Plivo API Documentation and Concepts](https://www.plivo.com/docs/)\n* [Examples](http://github.com/plivo/plivo-examples-node)\n",
  "bugs": {
    "url": "https://github.com/plivo/plivo-node/issues"
  },
  "homepage": "https://github.com/plivo/plivo-node",
  "_id": "plivo@0.1.0",
  "_from": "plivo@~0.1.0"
}
